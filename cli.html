<!DOCTYPE html><html lang="en"><head><title>cli</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="cli"><meta name="groc-project-path" content="src/cli.ls"><meta name="groc-github-url" content="https://github.com/hychen/addressbook-data-converter"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/hychen/addressbook-data-converter/blob/master/src/cli.ls">src/cli.ls</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="conveter">Conveter</h1></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>An function that its name starts with <code>convert</code> will known as a convter in 
this project and could be used in a dispatch function. 
The converter simply processes only one data source (which usually located in <code>rawdata</code> 
directory) and generate converted data (which usually located in <code>output</code> directory).
The dispatch function is used to lookup correct convert to do the following 
data converting. 
[note] All convter acceppts 2 aurgements.</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="example">Example</h2>

<p><code>
$ addressbook-data-converter --input_file rawdata/central/orglist.CSV --output_file output/orglist.json
</code></p></div></div><div class="code"><div class="wrapper"><span class="nx">export</span> <span class="nx">function</span> <span class="nx">dispatch</span><span class="p">(</span><span class="nx">modname</span><span class="p">,</span> <span class="nx">fnname</span><span class="p">)</span> 
  <span class="nv">pkg = </span><span class="nx">require</span> <span class="err">\</span><span class="p">.</span><span class="o">/</span>
  <span class="k">throw</span> <span class="s">&quot;#modname is not a module.&quot;</span> <span class="k">unless</span> <span class="nx">pkg</span><span class="p">[</span><span class="nx">modname</span><span class="p">]</span><span class="o">?</span>
  <span class="nv">module = </span><span class="nx">pkg</span><span class="p">[</span><span class="nx">modname</span><span class="p">]</span><span class="o">!</span>
  <span class="nv">fn = </span><span class="nx">module</span><span class="p">[</span><span class="nx">fnname</span><span class="p">]</span>
  <span class="k">throw</span> <span class="s">&quot;#fnname is not a function.&quot;</span> <span class="k">unless</span> <span class="k">typeof</span> <span class="nx">fn</span> <span class="o">is</span> <span class="s">\function</span> 
  <span class="nx">fn</span></div></div></div></div></body></html>
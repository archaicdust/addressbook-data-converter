#!/usr/bin/env lsc
cli = (require \./lib).cli!

argv = require \optimist
  .usage 'must specify path for rawdata to be transformed. $0'

  .demand 'input_file'
  .describe 'input_file', 'the rawdata files.'
  .alias 'i', 'input_file'

  .demand 'output_file'
  .describe 'output_file', 'output file path.'
  .alias 'o', 'output_file'

  .demand 'converter'
  .describe 'converter', 'converter function name.'
  .alias 'c', 'converter'

  .argv

err, count <- cli.convert_data argv.converter, [], argv.input_file, argv.output_file
if err
  console.log err
else
  console.log "processed #count items."
